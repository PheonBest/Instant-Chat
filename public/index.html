<!DOCTYPE html>
<html>
<head>
	<title>Socket.io is easy</title>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
	<style>
	input {color:white;background-color:#333;}
	</style>
</head>
<body class="w3-center">
	<h1>Hey !</h1>
	<input type="text" id="chat" class="w3-input" placeholder="Ã‰crivez ici pour discuter">
	<button onclick="sendM()">Envoyer</button>
	<script src="/socket.io/socket.io.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.dom.min.js"></script>
	<script>var socket = io();
	var sizeN = 30;
	var name = '';

	function setup() {
		noCanvas();
	}
	
	function sendM(){
		var toChat = document.getElementById("chat").value;
		document.getElementById("chat").value = '';
		if (name === ''){
			name = prompt('Quel est votre nom ?');
		}
		socket.emit('messageReached',name+': '+toChat);
		createP(name+': '+toChat);
	}

	socket.on('history',(allMessages)=>{
		console.log(allMessages);
		for (var i=0;i<allMessages.length;i++){
			createP(allMessages[i]);
		}
	})
	.on('message',(message)=>{
		createP(message);
	});

	</script>
</body>
</html>